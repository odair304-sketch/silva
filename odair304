#!/bin/bash
# deploy.sh â€” Script automÃ¡tico de commits e publicaÃ§Ã£o no GitHub Pages
# Autor: odair304
# RepositÃ³rio: Projeto_HTML5_Semantico
# ------------------------------------------

# Parar o script em caso de erro
set -e

# 1. Inicializa repositÃ³rio Git (caso ainda nÃ£o tenha sido feito)
echo "ğŸ”§ Inicializando repositÃ³rio Git..."
git init

git branch -M main

echo "ğŸ“ Adicionando arquivos..."
git add .

# 2. Primeiro commit â€” entrega inicial
commit_msg="chore: entrega 1 â€” estrutura HTML5 semÃ¢ntica, formulÃ¡rios e assets"
echo "ğŸ’¬ Criando commit inicial: $commit_msg"
git commit -m "$commit_msg"

# 3. Adiciona remoto (caso ainda nÃ£o exista)
if ! git remote | grep origin > /dev/null; then
  echo "ğŸŒ Adicionando remoto origin..."
  git remote add origin git@github.com:odair304/Projeto_HTML5_Semantico.git
else
  echo "âœ… Remoto origin jÃ¡ configurado."
fi

# 4. Envia para GitHub

echo "ğŸš€ Enviando arquivos para GitHub (branch main)..."
git push -u origin main || echo "âš ï¸ Verifique se vocÃª tem acesso SSH configurado."

# 5. Commits adicionais sugeridos (comentados â€” habilite conforme precisar)
: '
# git add js/masks.js cadastro.html
# git commit -m "feat(form): adicionar mÃ¡scaras para CPF, telefone e CEP"

# git add css/style.css
# git commit -m "fix: ajustar responsividade e contraste"

# git add images/
# git commit -m "perf(images): otimizaÃ§Ã£o e adiÃ§Ã£o de WebP"

git push
'

# 6. CriaÃ§Ã£o da branch gh-pages (opcional)
echo "ğŸ“¦ Criando branch gh-pages para GitHub Pages..."
git checkout -b gh-pages || echo "âš ï¸ Branch gh-pages jÃ¡ existe."
git push -u origin gh-pages || echo "âš ï¸ Branch gh-pages jÃ¡ publicada."

echo "âœ… Branch gh-pages criada e publicada."

echo "ğŸŒ Acesse em breve: https://github.com/odair304-sketch/silva/new/odair304-sketch-patch-1

echo "ğŸŸ¢ ConcluÃ­do!"
